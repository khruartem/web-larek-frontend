(()=>{"use strict";var t="".concat("","/api/weblarek"),e="".concat("","/content/weblarek");function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===_typeof(i)?i:String(i)),n)}var o,i}var r=function(){function ItemsData(t){!function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,ItemsData),this.events=t,this._preview=null}return function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(ItemsData,[{key:"getItem",value:function getItem(t){var e=this._items.find((function(e){return e.id===t}));return e||null}},{key:"items",get:function get(){return this._items},set:function set(t){this._items=t}},{key:"preview",get:function get(){return this._preview},set:function set(t){t?this.getItem(t)&&(this._preview=t,this.events.emit("item:selected")):this._preview=null}}]),ItemsData}();function events_typeof(t){return events_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},events_typeof(t)}function events_defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function events_toPrimitive(t,e){if("object"!==events_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==events_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===events_typeof(i)?i:String(i)),n)}var o,i}var n=function(){function EventEmitter(){!function events_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,EventEmitter),this._events=new Map}return function events_createClass(t,e,r){return e&&events_defineProperties(t.prototype,e),r&&events_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(EventEmitter,[{key:"on",value:function on(t,e){var r;this._events.has(t)||this._events.set(t,new Set),null===(r=this._events.get(t))||void 0===r||r.add(e)}},{key:"off",value:function off(t,e){var r;this._events.has(t)&&(this._events.get(t).delete(e),0===(null===(r=this._events.get(t))||void 0===r?void 0:r.size)&&this._events.delete(t))}},{key:"emit",value:function emit(t,e){this._events.forEach((function(r,n){"*"===n&&r.forEach((function(r){return r({eventName:t,data:e})})),(n instanceof RegExp&&n.test(t)||n===t)&&r.forEach((function(t){return t(e)}))}))}},{key:"onAll",value:function onAll(t){this.on("*",t)}},{key:"offAll",value:function offAll(){this._events=new Map}},{key:"trigger",value:function trigger(t,e){var r=this;return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.emit(t,Object.assign(Object.assign({},n||{}),e||{}))}}}]),EventEmitter}();function CartData_typeof(t){return CartData_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},CartData_typeof(t)}function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function _unsupportedIterableToArray(t,e){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _arrayLikeToArray(t,e)}(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function CartData_defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function CartData_toPrimitive(t,e){if("object"!==CartData_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==CartData_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===CartData_typeof(i)?i:String(i)),n)}var o,i}var o=function(){function CartData(t){!function CartData_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,CartData),this.events=t,this._items=new Set,this._size=this._items.size,this._total=0}return function CartData_createClass(t,e,r){return e&&CartData_defineProperties(t.prototype,e),r&&CartData_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(CartData,[{key:"addItem",value:function addItem(t){var e=JSON.stringify(t);this._items.add(e),this.updateCart()}},{key:"deleteItem",value:function deleteItem(t){var e=this.getItem(t);if(!e)throw new Error("Item ".concat(t," is not found in cart."));this._items.delete(JSON.stringify(e)),this.updateCart()}},{key:"contains",value:function contains(t){var e=this.getItem(t);return _toConsumableArray(this._items).some((function(t){return t===JSON.stringify(e)}))}},{key:"clear",value:function clear(){this._items=new Set,this._size=this._items.size,this._total=0,this.events.emit("cart:changed")}},{key:"updateCart",value:function updateCart(){this.size=this._items.size,this._total=this.recalculateTotal(this._items),this.events.emit("cart:changed")}},{key:"setIndexes",value:function setIndexes(t){var e=0;return t.forEach((function(t){t.index=++e})),t}},{key:"formatItemSet",value:function formatItemSet(t){return _toConsumableArray(t).map((function(t){return JSON.parse(t)}))}},{key:"getItem",value:function getItem(t){return this.formatItemSet(this._items).find((function(e){return e.id===t}))}},{key:"recalculateTotal",value:function recalculateTotal(t){return this.formatItemSet(t).reduce((function(t,e){return t+e.price}),0)}},{key:"items",get:function get(){var t=this.formatItemSet(this._items);return this.setIndexes(t)},set:function set(t){var e=this;t.forEach((function(t){e._items.add(JSON.stringify(t))})),this.updateCart()}},{key:"total",get:function get(){return this._total}},{key:"size",get:function get(){return this._size},set:function set(t){this._size=t}}]),CartData}();function OrderData_typeof(t){return OrderData_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},OrderData_typeof(t)}function OrderData_defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function OrderData_toPrimitive(t,e){if("object"!==OrderData_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==OrderData_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===OrderData_typeof(i)?i:String(i)),n)}var o,i}var i=function(){function OrderData(t){!function OrderData_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,OrderData),this.events=t}return function OrderData_createClass(t,e,r){return e&&OrderData_defineProperties(t.prototype,e),r&&OrderData_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(OrderData,[{key:"isValid",value:function isValid(){return!!(this.payment&&this.address&&this.email&&this.phone&&this.items&&this.total)}},{key:"clear",value:function clear(){this._total=null,this._items=null,this._payment=null,this._address=null,this._email=null,this._phone=null,this.events.emit("order:changed")}},{key:"order",get:function get(){return{payment:this._payment,email:this._email,phone:this._phone,address:this._address,total:this._total,items:this._items}}},{key:"payment",get:function get(){return this._payment},set:function set(t){this._payment=t,this.events.emit("order:changed")}},{key:"address",get:function get(){return this._address},set:function set(t){this._address=t,this.events.emit("order:changed")}},{key:"email",get:function get(){return this._email},set:function set(t){this._email=t,this.events.emit("order:changed")}},{key:"phone",get:function get(){return this._phone},set:function set(t){this._phone=t,this.events.emit("order:changed")}},{key:"total",get:function get(){return this._total},set:function set(t){this._total=t,this.events.emit("order:changed")}},{key:"items",set:function set(t){this._items=t,this.events.emit("order:changed")}},{key:"created",get:function get(){return this._created},set:function set(t){if(!t.id)throw new Error("Error while creating the order: id is missing");this._created=t}}]),OrderData}();function Component_typeof(t){return Component_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Component_typeof(t)}function Component_defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function Component_toPrimitive(t,e){if("object"!==Component_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Component_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===Component_typeof(i)?i:String(i)),n)}var o,i}var a=function(){function Component(t){!function Component_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Component),this.container=t}return function Component_createClass(t,e,r){return e&&Component_defineProperties(t.prototype,e),r&&Component_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(Component,[{key:"render",value:function render(t){return Object.assign(this,null!=t?t:{}),this.container}}]),Component}();function Item_typeof(t){return Item_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Item_typeof(t)}function Item_defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function Item_toPrimitive(t,e){if("object"!==Item_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Item_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===Item_typeof(i)?i:String(i)),n)}var o,i}function _setPrototypeOf(t,e){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,e){return t.__proto__=e,t},_setPrototypeOf(t,e)}function _createSuper(t){var e=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function _possibleConstructorReturn(t,e){if(e&&("object"===Item_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}(this,r)}}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}var s=function(t){!function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf(t,e)}(Item,t);var r=_createSuper(Item);function Item(t,e){var n;return function Item_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Item),(n=r.call(this,t)).events=e,n._button=n.container.querySelector(".card__button"),n._category=n.container.querySelector(".card__category"),n._title=n.container.querySelector(".card__title"),n._image=n.container.querySelector(".card__image"),n._price=n.container.querySelector(".card__price"),n._description=n.container.querySelector(".card__text"),n._index=n.container.querySelector(".basket__item-index"),n._index&&(n._index.textContent="-"),n.container.classList.contains("gallery__item")&&n.container.addEventListener("click",(function(){n.events.emit("item:select",{item:_assertThisInitialized(n)})})),n._button&&(n._button.classList.contains("basket__item-delete")?n._button.addEventListener("click",(function(){n.events.emit("item:delete",{item:_assertThisInitialized(n)})})):n._button.addEventListener("click",(function(){n.events.emit("item:add",{item:_assertThisInitialized(n)})}))),n}return function Item_createClass(t,e,r){return e&&Item_defineProperties(t.prototype,e),r&&Item_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(Item,[{key:"deleteItem",value:function deleteItem(){this.container.remove(),this.container=null}},{key:"id",get:function get(){return this._id},set:function set(t){this._id=t}},{key:"setValid",value:function setValid(t){this._button&&(this._button.disabled=!t)}},{key:"setButtonTitle",value:function setButtonTitle(t){this._button&&t&&(this._button.textContent=t),this._button&&!t&&(this._button.textContent="В корзину")}},{key:"index",set:function set(t){this._index&&(this._index.textContent=t.toString())}},{key:"description",set:function set(t){this._description&&(this._description.textContent=t)}},{key:"image",set:function set(t){t.includes("/")||(t="".concat("/",t)),this._image&&(this._image.src="".concat(e).concat(t))}},{key:"title",set:function set(t){this._title&&(this._title.textContent=t)}},{key:"category",set:function set(t){this._category&&(this._category.textContent=t,this.setCategoryStyle(t))}},{key:"setCategoryStyle",value:function setCategoryStyle(t){switch(this._category.className="card__category",t){case"софт-скил":this._category.classList.add("card__category_soft");break;case"другое":this._category.classList.add("card__category_other");break;case"дополнительное":this._category.classList.add("card__category_additional");break;case"кнопка":this._category.classList.add("card__category_button");break;case"хард-скил":this._category.classList.add("card__category_hard")}}},{key:"price",set:function set(t){this._price&&(t?this._price.textContent="".concat(t.toString()," синапсов"):(this._price.textContent="Бесценный",this.setValid(!1)))}}]),Item}(a);function isSelector(t){return"string"==typeof t&&t.length>1}function ensureElement(t,e){if(isSelector(t)){var r=function ensureAllElements(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;if(isSelector(t))return Array.from(e.querySelectorAll(t));if(t instanceof NodeList)return Array.from(t);if(Array.isArray(t))return t;throw new Error("Unknown selector element")}(t,e);if(r.length>1&&console.warn("selector ".concat(t," return more then one element")),0===r.length)throw new Error("selector ".concat(t," return nothing"));return r.pop()}if(t instanceof HTMLElement)return t;throw new Error("Unknown selector element")}function cloneTemplate(t){return ensureElement(t).content.firstElementChild.cloneNode(!0)}function setElementData(t,e){for(var r in e)t.dataset[r]=String(e[r])}function ItemsCatalog_typeof(t){return ItemsCatalog_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ItemsCatalog_typeof(t)}function ItemsCatalog_toConsumableArray(t){return function ItemsCatalog_arrayWithoutHoles(t){if(Array.isArray(t))return ItemsCatalog_arrayLikeToArray(t)}(t)||function ItemsCatalog_iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function ItemsCatalog_unsupportedIterableToArray(t,e){if(!t)return;if("string"==typeof t)return ItemsCatalog_arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ItemsCatalog_arrayLikeToArray(t,e)}(t)||function ItemsCatalog_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ItemsCatalog_arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ItemsCatalog_defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function ItemsCatalog_toPrimitive(t,e){if("object"!==ItemsCatalog_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ItemsCatalog_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===ItemsCatalog_typeof(i)?i:String(i)),n)}var o,i}function ItemsCatalog_setPrototypeOf(t,e){return ItemsCatalog_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,e){return t.__proto__=e,t},ItemsCatalog_setPrototypeOf(t,e)}function ItemsCatalog_createSuper(t){var e=function ItemsCatalog_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,n=ItemsCatalog_getPrototypeOf(t);if(e){var o=ItemsCatalog_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function ItemsCatalog_possibleConstructorReturn(t,e){if(e&&("object"===ItemsCatalog_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function ItemsCatalog_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function ItemsCatalog_getPrototypeOf(t){return ItemsCatalog_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},ItemsCatalog_getPrototypeOf(t)}var c=function(t){!function ItemsCatalog_inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ItemsCatalog_setPrototypeOf(t,e)}(ItemsCatalog,t);var e=ItemsCatalog_createSuper(ItemsCatalog);function ItemsCatalog(t,r){var n;return function ItemsCatalog_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,ItemsCatalog),(n=e.call(this,t)).element=r,n}return function ItemsCatalog_createClass(t,e,r){return e&&ItemsCatalog_defineProperties(t.prototype,e),r&&ItemsCatalog_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(ItemsCatalog,[{key:"catalog",set:function set(t){var e;(e=this.container).replaceChildren.apply(e,ItemsCatalog_toConsumableArray(t))}}]),ItemsCatalog}(a);function Modal_typeof(t){return Modal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Modal_typeof(t)}function Modal_defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function Modal_toPrimitive(t,e){if("object"!==Modal_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Modal_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===Modal_typeof(i)?i:String(i)),n)}var o,i}var u=function(){function Modal(t,e){var r=this;!function Modal_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Modal),this.modal=document.querySelector(t),this.container=this.modal.querySelector(".modal__content"),this.closeButton=this.modal.querySelector(".modal__close"),this.events=e,this.modal.addEventListener("click",(function(t){t.target!==r.modal&&t.target!==r.closeButton||r.events.emit("modal:close")}))}return function Modal_createClass(t,e,r){return e&&Modal_defineProperties(t.prototype,e),r&&Modal_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(Modal,[{key:"content",set:function set(t){this.container.replaceChildren(),this._content=t,this.container.append(t)}},{key:"open",value:function open(t){this.content=t,this.modal.classList.add("modal_active")}},{key:"close",value:function close(){this.modal.classList.remove("modal_active")}}]),Modal}();function Page_typeof(t){return Page_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Page_typeof(t)}function Page_defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function Page_toPrimitive(t,e){if("object"!==Page_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Page_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===Page_typeof(i)?i:String(i)),n)}var o,i}var l=function(){function Page(t){!function Page_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Page),this.container=document.querySelector(t)}return function Page_createClass(t,e,r){return e&&Page_defineProperties(t.prototype,e),r&&Page_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(Page,[{key:"lock",value:function lock(){this.container.classList.add("page__wrapper_locked")}},{key:"unlock",value:function unlock(){this.container.classList.remove("page__wrapper_locked")}}]),Page}();function Cart_typeof(t){return Cart_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cart_typeof(t)}function Cart_toConsumableArray(t){return function Cart_arrayWithoutHoles(t){if(Array.isArray(t))return Cart_arrayLikeToArray(t)}(t)||function Cart_iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function Cart_unsupportedIterableToArray(t,e){if(!t)return;if("string"==typeof t)return Cart_arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Cart_arrayLikeToArray(t,e)}(t)||function Cart_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cart_arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Cart_defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function Cart_toPrimitive(t,e){if("object"!==Cart_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Cart_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===Cart_typeof(i)?i:String(i)),n)}var o,i}function Cart_setPrototypeOf(t,e){return Cart_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,e){return t.__proto__=e,t},Cart_setPrototypeOf(t,e)}function Cart_createSuper(t){var e=function Cart_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,n=Cart_getPrototypeOf(t);if(e){var o=Cart_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function Cart_possibleConstructorReturn(t,e){if(e&&("object"===Cart_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function Cart_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Cart_getPrototypeOf(t){return Cart_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},Cart_getPrototypeOf(t)}var f=function(t){!function Cart_inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Cart_setPrototypeOf(t,e)}(Cart,t);var e=Cart_createSuper(Cart);function Cart(t,r){var n;return function Cart_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Cart),(n=e.call(this,t)).events=r,n._catalog=t.querySelector(".basket__list"),n._total=t.querySelector(".basket__price"),n.checkOutButton=t.querySelector(".basket__button"),n.cartIcon=document.querySelector(".header__basket"),n._size=document.querySelector(".header__basket-counter"),n.checkOutButton.addEventListener("click",(function(){r.emit("cart:checkout")})),n.cartIcon.addEventListener("click",(function(){r.emit("cart:open")})),n}return function Cart_createClass(t,e,r){return e&&Cart_defineProperties(t.prototype,e),r&&Cart_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(Cart,[{key:"setValid",value:function setValid(t,e){"icon"===e&&(this.cartIcon.disabled=!t),"button"===e&&(this.checkOutButton.disabled=!t)}},{key:"setButtonTitle",value:function setButtonTitle(t){this.checkOutButton.textContent=t}},{key:"catalog",set:function set(t){var e;(e=this._catalog).replaceChildren.apply(e,Cart_toConsumableArray(t))}},{key:"total",set:function set(t){this._total.textContent="".concat(t," синапсов")}},{key:"size",set:function set(t){this._size.textContent=t}}]),Cart}(a);function Form_typeof(t){return Form_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Form_typeof(t)}function Form_defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function Form_toPrimitive(t,e){if("object"!==Form_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Form_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===Form_typeof(i)?i:String(i)),n)}var o,i}function Form_setPrototypeOf(t,e){return Form_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,e){return t.__proto__=e,t},Form_setPrototypeOf(t,e)}function Form_createSuper(t){var e=function Form_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,n=Form_getPrototypeOf(t);if(e){var o=Form_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function Form_possibleConstructorReturn(t,e){if(e&&("object"===Form_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function Form_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Form_getPrototypeOf(t){return Form_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},Form_getPrototypeOf(t)}var __rest=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r},p=function(t){!function Form_inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Form_setPrototypeOf(t,e)}(Form,t);var e=Form_createSuper(Form);function Form(t,r){var n;return function Form_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Form),(n=e.call(this,t)).events=r,n.formName=n.container.name,n.cardButton=t.querySelector('button[name="card"]'),n.cashButton=t.querySelector('button[name="cash"]'),n.submitButton=t.querySelector('button[type="submit"]'),n.inputs=t.querySelectorAll(".form__input"),n.error=t.querySelector(".form__errors"),setElementData(n.error,{error:"Заполните все поля"}),n.cardButton&&n.cashButton&&(n.cardButton.addEventListener("click",(function(){n.select(n.cardButton),n.unselect(n.cashButton),n.events.emit("".concat(n.formName,":input"),Object.assign({},n.getInputValues()))})),n.cashButton.addEventListener("click",(function(){n.select(n.cashButton),n.unselect(n.cardButton),n.events.emit("".concat(n.formName,":input"),Object.assign({},n.getInputValues()))}))),n.container.addEventListener("input",(function(){n.events.emit("".concat(n.formName,":input"),Object.assign({},n.getInputValues()))})),n.container.addEventListener("submit",(function(t){t.preventDefault(),n.events.emit("".concat(n.formName,":submit"),n.getInputValues())})),n}return function Form_createClass(t,e,r){return e&&Form_defineProperties(t.prototype,e),r&&Form_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(Form,[{key:"setValid",value:function setValid(t){this.submitButton.disabled=!t}},{key:"showErrors",value:function showErrors(t){t?(this.error.classList.add("modal__message_error"),this.error.textContent=t):(this.error.classList.add("modal__message_error"),this.error.textContent=function getElementData(t,e){var r={};for(var n in t.dataset)r[n]=e[n](t.dataset[n]);return r}(this.error,{error:function error(t){return t}}).error)}},{key:"hideErrors",value:function hideErrors(){this.error.classList.remove("modal__message_error"),this.error.textContent=""}},{key:"select",value:function select(t){t.classList.toggle("button_alt-active")}},{key:"unselect",value:function unselect(t){t.classList.remove("button_alt-active")}},{key:"isSelected",value:function isSelected(t){return!!t.classList.contains("button_alt-active")}},{key:"payment",set:function set(t){switch(t){case"card":this.isSelected(this.cardButton)||this.select(this.cardButton),this.isSelected(this.cashButton)&&this.unselect(this.cashButton);break;case"cash":this.isSelected(this.cashButton)||this.select(this.cashButton),this.isSelected(this.cardButton)&&this.unselect(this.cardButton);break;default:this.unselect(this.cardButton),this.unselect(this.cashButton)}}},{key:"getInputValues",value:function getInputValues(){var t={};return this.cardButton&&this.cashButton&&(this.isSelected(this.cardButton)?Object.assign(t,{payment:this.cardButton.name}):this.isSelected(this.cashButton)?Object.assign(t,{payment:this.cashButton.name}):Object.assign(t,{payment:null})),this.inputs.forEach((function(e){t[e.name]=e.value})),t}},{key:"inputValues",set:function set(t){var e=t.payment,r=__rest(t,["payment"]);e&&(this.cardButton||this.cashButton)&&(this.payment=e),r&&this.inputs.forEach((function(t){t.value=r[t.name]})),this.events.emit("".concat(this.formName,":input"),Object.assign({},this.getInputValues()))}},{key:"clear",value:function clear(){this.container.reset(),this.isSelected(this.cardButton)&&this.unselect(this.cardButton),this.isSelected(this.cashButton)&&this.unselect(this.cashButton)}}]),Form}(a);function api_typeof(t){return api_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},api_typeof(t)}function api_defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function api_toPrimitive(t,e){if("object"!==api_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==api_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===api_typeof(i)?i:String(i)),n)}var o,i}var y=function(){function Api(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function api_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Api),this.baseUrl=t,this.options={headers:Object.assign({"Content-Type":"application/json"},null!==(e=r.headers)&&void 0!==e?e:{})}}return function api_createClass(t,e,r){return e&&api_defineProperties(t.prototype,e),r&&api_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(Api,[{key:"handleResponse",value:function handleResponse(t){return t.ok?t.json():t.json().then((function(e){var r;return Promise.reject(null!==(r=e.error)&&void 0!==r?r:t.statusText)}))}},{key:"get",value:function get(t){return fetch(this.baseUrl+t,Object.assign(Object.assign({},this.options),{method:"GET"})).then(this.handleResponse)}},{key:"post",value:function post(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"POST";return fetch(this.baseUrl+t,Object.assign(Object.assign({},this.options),{method:r,body:JSON.stringify(e)})).then(this.handleResponse)}}]),Api}();function AppApi_typeof(t){return AppApi_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},AppApi_typeof(t)}function AppApi_defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function AppApi_toPrimitive(t,e){if("object"!==AppApi_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==AppApi_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===AppApi_typeof(i)?i:String(i)),n)}var o,i}var m=function(){function AppApi(t){!function AppApi_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,AppApi),this._baseApi=t}return function AppApi_createClass(t,e,r){return e&&AppApi_defineProperties(t.prototype,e),r&&AppApi_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(AppApi,[{key:"getItems",value:function getItems(){return this._baseApi.get("/product").then((function(t){return t.items}))}},{key:"getItem",value:function getItem(t){return this._baseApi.get("/product/".concat(t)).then((function(t){return t}))}},{key:"createOrder",value:function createOrder(t){return this._baseApi.post("/order",t).then((function(t){return t}))}}]),AppApi}();function Message_typeof(t){return Message_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Message_typeof(t)}function Message_defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function Message_toPrimitive(t,e){if("object"!==Message_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Message_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===Message_typeof(i)?i:String(i)),n)}var o,i}function Message_setPrototypeOf(t,e){return Message_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,e){return t.__proto__=e,t},Message_setPrototypeOf(t,e)}function Message_createSuper(t){var e=function Message_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,n=Message_getPrototypeOf(t);if(e){var o=Message_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function Message_possibleConstructorReturn(t,e){if(e&&("object"===Message_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function Message_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Message_getPrototypeOf(t){return Message_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},Message_getPrototypeOf(t)}var d=function(t){!function Message_inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Message_setPrototypeOf(t,e)}(Message,t);var e=Message_createSuper(Message);function Message(t,r){var n;return function Message_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Message),(n=e.call(this,t))._description=t.querySelector(".order-success__description"),n.closeButton=t.querySelector(".button"),n.closeButton.addEventListener("click",(function(){r.emit("all:reset")})),n}return function Message_createClass(t,e,r){return e&&Message_defineProperties(t.prototype,e),r&&Message_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(Message,[{key:"description",set:function set(t){this._description.textContent=t}}]),Message}(a),_=new m(new y(t)),h=new n,b=new r(h),v=new o(h),g=new i(h),C=new c(document.querySelector(".gallery")),P=new f(cloneTemplate(document.querySelector("#basket")),h),S=new u("#modal-container",h),O=new l(".page__wrapper"),w=new p(cloneTemplate(document.querySelector("#order")),h),k=new p(cloneTemplate(document.querySelector("#contacts")),h),I=new d(cloneTemplate(document.querySelector("#success")),h),j=document.querySelector("#card-catalog"),E=document.querySelector("#card-preview"),A=document.querySelector("#card-basket"),T=[],B=[];function fillCatalog(t,e,r){t.items.forEach((function(t){var n=new s(cloneTemplate(r),h);e.push(n.render(t))}))}function handlerInput(t,e){t.email&&t.phone||t.address&&t.payment?(e.setValid(!0),e.hideErrors()):(e.setValid(!1),e.showErrors())}_.getItems().then((function(t){return h.emit("items:loaded",{data:t})})).catch((function(t){return console.log(t)})),h.on("items:loaded",(function(t){b.items=t.data,fillCatalog(b,T,j),C.render({catalog:T}),v.size||P.setValid(!1,"icon")})),h.on("item:select",(function(t){v.contains(t.item.id)?(t.item.setValid(!1),t.item.setButtonTitle("Уже в корзине")):(t.item.setValid(!0),t.item.setButtonTitle()),b.preview=t.item.id;var e=function renderItemPreview(){var t=new s(cloneTemplate(E),h);v.contains(b.preview)&&(t.setValid(!1),t.setButtonTitle("Уже в корзине"));return t.render(b.getItem(b.preview))}();S.open(e),O.lock()})),h.on("cart:open",(function(){S.open(P.render({catalog:B,total:v.total.toString(),size:v.size.toString()})),O.lock()})),h.on("modal:close",(function(){v.size?P.setValid(!0,"icon"):P.setValid(!1,"icon"),S.close(),O.unlock()})),h.on("item:add",(function(t){t.item.setValid(!1),t.item.setButtonTitle("Уже в корзине"),v.addItem(b.getItem(t.item.id)),P.setValid(!0,"button");var e=new s(cloneTemplate(A),h),r=v.items.find((function(e){return e.id===t.item.id}));B.push(e.render(r)),P.size=v.size.toString()})),h.on("item:delete",(function(t){t.item.setValid(!0),t.item.setButtonTitle(),v.deleteItem(t.item.id),v.size||P.setValid(!1,"button"),B.splice(0,B.length),fillCatalog(v,B,A),P.render({catalog:B,total:v.total.toString(),size:v.size.toString()})})),h.on("cart:checkout",(function(){g.items=v.items.map((function(t){return t.id})),g.total=v.total,g.address&&g.payment?w.inputValues={payment:g.payment,address:g.address}:(w.clear(),w.setValid(!1),w.showErrors()),S.content=w.render()})),h.on("order:input",(function(t){handlerInput(t,w)})),h.on("order:submit",(function(t){g.address=t.address,g.payment=t.payment,g.email&&g.phone?k.inputValues={email:g.email,phone:g.phone}:(k.setValid(!1),k.showErrors()),S.content=k.render()})),h.on("contacts:input",(function(t){handlerInput(t,k)})),h.on("contacts:submit",(function(t){if(g.email=t.email,g.phone=t.phone,!g.isValid)throw new Error("Order has invalid");_.createOrder(g.order).then((function(t){return h.emit("order:created",{createdOrder:t})})).catch((function(t){return k.showErrors("Ошибка при создании заказа: ".concat(t))}))})),h.on("order:created",(function(t){S.open(I.render({description:"Списано ".concat(t.createdOrder.total," синапсов")})),g.created=t.createdOrder})),h.on("all:reset",(function(){v.clear(),g.clear(),P.size=v.size.toString(),P.setValid(!1,"icon"),B.splice(0,B.length),P.catalog=B,S.close(),O.unlock()}))})();
//# sourceMappingURL=main.js.map